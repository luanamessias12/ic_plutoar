<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pluto AR - Gameplay com Formas</title>
<style>
  html, body { margin:0; padding:0; overflow:hidden; background:#000; font-family: Arial, sans-serif; }
  canvas { display:block; }
  #startButton {
    position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
    padding: 12px 26px; font-size: 18px; font-weight: 700; color: #fff;
    background: #660273; border: none; border-radius: 10px; cursor: pointer; z-index: 9999;
  }
  #startButton:hover { background: #A305A6; }
  #hud {
    position: fixed; top: 16px; left: 20px; color: #fff; font-size: 20px;
    z-index: 9998; text-shadow: 0 0 6px rgba(0,0,0,.6);
  }
</style>
</head>
<body>

<button id="startButton">Start</button>
<div id="hud">Pontos: <span id="score">0</span></div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const startBtn = document.getElementById('startButton');
const scoreEl = document.getElementById('score');

let running = false;
let score = 0;
let frame = 0;

function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

// ------------------- Player -------------------
const player = { x:100, y:canvas.height/2, w:50, h:50, speed:7 };

// ------------------- Objetos -------------------
let asteroids = [];
let planets = [];

// ------------------- Funções -------------------
function resetGame(){
  player.y = canvas.height/2;
  asteroids = [];
  planets = [];
  frame = 0;
  score = 0;
  scoreEl.textContent = score;
}

function spawnAsteroid(){
  const type = Math.floor(Math.random()*3); // tamanho pequeno, médio, grande
  const size = 30 + type*20;
  asteroids.push({
    x: canvas.width,
    y: Math.random()*(canvas.height-size),
    w: size, h: size,
    speed: 5 + Math.random()*3,
    type: type
  });
}

function spawnPlanet(){
  const size = 40;
  const colors = ["#a0a0a0","#ffcc00","#00ccff","#ff6666","#ff9900","#ccff00","#00ffff"];
  const color = colors[Math.floor(Math.random()*colors.length)];
  planets.push({
    x: canvas.width,
    y: Math.random()*(canvas.height-size),
    w: size, h: size,
    speed: 4,
    color: color
  });
}

// ------------------- Desenho -------------------
function drawBackground(){
  ctx.fillStyle="#000";
  ctx.fillRect(0,0,canvas.width,canvas.height);
}

function drawPlayer(){
  ctx.fillStyle="#fff";
  ctx.fillRect(player.x,player.y,player.w,player.h);
}

function drawAsteroids(){
  asteroids.forEach(a=>{
    ctx.fillStyle="#888";
    ctx.beginPath();
    ctx.arc(a.x + a.w/2, a.y + a.h/2, a.w/2, 0, Math.PI*2);
    ctx.fill();
  });
}

function drawPlanets(){
  planets.forEach(p=>{
    ctx.fillStyle = p.color;
    ctx.beginPath();
    ctx.arc(p.x + p.w/2, p.y + p.h/2, p.w/2, 0, Math.PI*2);
    ctx.fill();
  });
}

// ------------------- Atualizar -------------------
function update(){
  frame++;
  if(frame % 90 === 0) spawnAsteroid();
  if(frame % 150 === 0) spawnPlanet();
  // Aumenta velocidade após 45s (~2700 frames a 60fps)
  if(frame % 2700 === 0 && frame!==0){
    asteroids.forEach(a=>a.speed+=1);
    planets.forEach(p=>p.speed+=0.5);
  }

  asteroids.forEach(a=>a.x -= a.speed);
  planets.forEach(p=>p.x -= p.speed);

  asteroids = asteroids.filter(a=>a.x + a.w > 0);
  planets = planets.filter(p=>p.x + p.w > 0);

  // Colisão asteroides
  asteroids.forEach(a=>{
    if(player.x < a.x+a.w && player.x+player.w>a.x &&
       player.y < a.y+a.h && player.y+player.h>a.y){
      endGame();
    }
  });

  // Coletar planetas
  planets.forEach((p,i)=>{
    if(player.x < p.x+p.w && player.x+player.w>p.x &&
       player.y < p.y+p.h && player.y+player.h>p.y){
      score++;
      scoreEl.textContent=score;
      planets.splice(i,1);
    }
  });
}

// ------------------- Loop -------------------
function loop(){
  if(!running) return;
  drawBackground();
  update();
  drawAsteroids();
  drawPlanets();
  drawPlayer();
  requestAnimationFrame(loop);
}

// ------------------- Controles -------------------
document.addEventListener('keydown', e=>{
  if(!running) return;
  if(e.key==='ArrowUp'||e.key==='w') player.y -= player.speed;
  if(e.key==='ArrowDown'||e.key==='s') player.y += player.speed;
});

canvas.addEventListener('mousemove', e=>{
  if(running) player.y = e.clientY - player.h/2;
});

canvas.addEventListener('touchmove', e=>{
  if(running) player.y = e.touches[0].clientY - player.h/2;
});

// ------------------- Fim do jogo -------------------
function endGame(){
  running=false;
  startBtn.style.display='block';
  startBtn.textContent='Restart';
}

// ------------------- Start -------------------
startBtn.addEventListener('click', ()=>{
  resetGame();
  running=true;
  startBtn.style.display='none';
  loop();
});
</script>
</body>
</html>


