<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pluto AR - Gameplay com Astronauta</title>
<style>
  html, body { margin:0; padding:0; overflow:hidden; background:#000; font-family: Arial, sans-serif; }
  canvas { display:block; }
  #startButton {
    position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
    padding: 12px 26px; font-size: 18px; font-weight: 700; color: #fff;
    background: #660273; border: none; border-radius: 10px; cursor: pointer; z-index: 9999;
  }
  #startButton:hover { background: #A305A6; }
  #hud {
    position: fixed; top: 16px; left: 20px; color: #fff; font-size: 20px;
    z-index: 9998; text-shadow: 0 0 6px rgba(0,0,0,.6);
  }
</style>
</head>
<body>

<button id="startButton">Start</button>
<div id="hud">Pontos: <span id="score">0</span></div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const startBtn = document.getElementById('startButton');
const scoreEl = document.getElementById('score');

let running = false;
let score = 0;
let frame = 0;

function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

// ------------------- Imagem de Fundo -------------------
const bgImg = new Image();
bgImg.src = "https://cdn.glitch.global/4cfbcd0a-1382-44f1-b55c-1f16f20ea425%2FSolarsystemscope_texture_8k_stars_milky_way.jpg?v=1624110041528"; 

// ------------------- Imagem do Astronauta -------------------
const astronautImg = new Image();
astronautImg.src = "/astrogame.png"; // sua imagem do astronauta

// ------------------- Imagem do Asteroide -------------------
const asteroidImg = new Image();
asteroidImg.src = "/asteroidegame.png"; 

// ------------------- Imagens dos Planetas -------------------
const planetImages = [
  { name:"Mercúrio", img:new Image(), size:30, src:"/game/mercuriogame.png" },
  { name:"Vênus",   img:new Image(), size:40, src:"/game/venusgame.png" },
  { name:"Terra",   img:new Image(), size:45, src:"/game/terragame.png" },
  { name:"Marte",   img:new Image(), size:35, src:"/game/martegame.png" },
  { name:"Júpiter", img:new Image(), size:80, src:"/game/jupitergame.png" },
  { name:"Saturno", img:new Image(), size:70, src:"/game/saturnogame.png" },
  { name:"Urano",   img:new Image(), size:60, src:"/game/uranogame.png" },
  { name:"Netuno",  img:new Image(), size:60, src:"/game/netunogame.png" }
];
// carregar imagens
planetImages.forEach(p => p.img.src = p.src);

// ------------------- Player -------------------
const player = { x:100, y:canvas.height/2, w:60, h:60, speed:7 };

// ------------------- Objetos -------------------
let asteroids = [];
let planets = [];

// ------------------- Funções -------------------
function resetGame(){
  player.y = canvas.height/2;
  asteroids = [];
  planets = [];
  frame = 0;
  score = 0;
  scoreEl.textContent = score;
}

function spawnAsteroid(){
  const type = Math.floor(Math.random()*3); 
  const size = 30 + type*20; 
  asteroids.push({
    x: canvas.width,
    y: Math.random()*(canvas.height-size),
    w: size, h: size,
    speed: 5 + Math.random()*3,
    type: type
  });
}

function spawnPlanet(){
  const planet = planetImages[Math.floor(Math.random()*planetImages.length)];
  planets.push({
    x: canvas.width,
    y: Math.random()*(canvas.height-planet.size),
    w: planet.size, h: planet.size,
    speed: 4,
    img: planet.img
  });
}

// ------------------- Desenho -------------------
function drawBackground(){
  if (bgImg.complete) {
    ctx.drawImage(bgImg, 0, 0, canvas.width, canvas.height);
  } else {
    ctx.fillStyle="#000";
    ctx.fillRect(0,0,canvas.width,canvas.height);
  }
}

function drawPlayer(){
  if (astronautImg.complete) {
    ctx.drawImage(astronautImg, player.x, player.y, player.w, player.h);
  } else {
    ctx.fillStyle="#fff";
    ctx.fillRect(player.x,player.y,player.w,player.h);
  }
}

function drawAsteroids(){
  asteroids.forEach(a=>{
    if (asteroidImg.complete) {
      ctx.drawImage(asteroidImg, a.x, a.y, a.w, a.h);
    } else {
      ctx.fillStyle="#888";
      ctx.beginPath();
      ctx.arc(a.x + a.w/2, a.y + a.h/2, a.w/2, 0, Math.PI*2);
      ctx.fill();
    }
  });
}

function drawPlanets(){
  planets.forEach(p=>{
    if (p.img.complete) {
      ctx.drawImage(p.img, p.x, p.y, p.w, p.h);
    } else {
      ctx.fillStyle="#0ff";
      ctx.beginPath();
      ctx.arc(p.x + p.w/2, p.y + p.h/2, p.w/2, 0, Math.PI*2);
      ctx.fill();
    }
  });
}

// ------------------- Atualizar -------------------
function update(){
  frame++;
  if(frame % 90 === 0) spawnAsteroid();
  if(frame % 150 === 0) spawnPlanet();

  if(frame % 2700 === 0 && frame!==0){
    asteroids.forEach(a=>a.speed+=1);
    planets.forEach(p=>p.speed+=0.5);
  }

  asteroids.forEach(a=>a.x -= a.speed);
  planets.forEach(p=>p.x -= p.speed);

  asteroids = asteroids.filter(a=>a.x + a.w > 0);
  planets = planets.filter(p=>p.x + p.w > 0);

  asteroids.forEach(a=>{
    if(player.x < a.x+a.w && player.x+player.w>a.x &&
       player.y < a.y+a.h && player.y+player.h>a.y){
      endGame();
    }
  });

  planets.forEach((p,i)=>{
    if(player.x < p.x+p.w && player.x+player.w>p.x &&
       player.y < p.y+p.h && player.y+player.h>p.y){
      score++;
      scoreEl.textContent=score;
      planets.splice(i,1);
    }
  });
}

// ------------------- Loop -------------------
function loop(){
  if(!running) return;
  drawBackground();
  update();
  drawAsteroids();
  drawPlanets();
  drawPlayer();
  requestAnimationFrame(loop);
}

// ------------------- Controles -------------------
document.addEventListener('keydown', e=>{
  if(!running) return;
  if(e.key==='ArrowUp'||e.key==='w') player.y -= player.speed;
  if(e.key==='ArrowDown'||e.key==='s') player.y += player.speed;
});

canvas.addEventListener('mousemove', e=>{
  if(running) player.y = e.clientY - player.h/2;
});

canvas.addEventListener('touchmove', e=>{
  if(running) player.y = e.touches[0].clientY - player.h/2;
});

// ------------------- Fim do jogo -------------------
function endGame(){
  running=false;
  startBtn.style.display='block';
  startBtn.textContent='Restart';
}

// ------------------- Start -------------------
startBtn.addEventListener('click', ()=>{
  resetGame();
  running=true;
  startBtn.style.display='none';
  loop();
});
</script>
</body>
</html>
